<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MVP from Julio Veganos e Hijos (User Managment): main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MVP from Julio Veganos e Hijos (User Managment)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>User Database Testing Program.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;set&gt;</code><br />
<code>#include &lt;limits&gt;</code><br />
<code>#include &quot;../UserDatabase.h&quot;</code><br />
<code>#include &quot;../../Users/User.h&quot;</code><br />
<code>#include &quot;../../Users/Admin.h&quot;</code><br />
<code>#include &quot;../../Users/Employee.h&quot;</code><br />
<code>#include &quot;../../Users/UserFactory.h&quot;</code><br />
<code>#include &quot;../Exceptions/UserDatabaseException.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp__incl.png" border="0" usemap="#amain_8cpp" alt=""/></div>
<map name="amain_8cpp" id="amain_8cpp">
<area shape="rect" title=" " alt="" coords="468,5,551,31"/>
<area shape="rect" title=" " alt="" coords="5,86,85,111"/>
<area shape="poly" title=" " alt="" coords="468,25,305,43,201,59,98,81,88,84,86,79,97,76,200,54,304,38,468,20"/>
<area shape="rect" title=" " alt="" coords="110,86,183,111"/>
<area shape="poly" title=" " alt="" coords="468,27,346,47,197,81,188,84,186,79,195,76,345,42,467,22"/>
<area shape="rect" title=" " alt="" coords="208,86,267,111"/>
<area shape="poly" title=" " alt="" coords="468,30,381,51,280,81,274,83,272,78,278,76,379,46,467,25"/>
<area shape="rect" title=" " alt="" coords="291,86,333,111"/>
<area shape="poly" title=" " alt="" coords="473,33,413,54,346,81,344,82,342,77,344,76,411,49,471,28"/>
<area shape="rect" title=" " alt="" coords="357,86,416,111"/>
<area shape="poly" title=" " alt="" coords="493,33,418,81,415,76,490,29"/>
<area shape="rect" title=" " alt="" coords="440,86,579,111"/>
<area shape="poly" title=" " alt="" coords="512,31,512,72,507,72,507,31"/>
<area shape="rect" title=" " alt="" coords="603,86,731,111"/>
<area shape="poly" title=" " alt="" coords="533,28,633,78,630,82,531,33"/>
<area shape="rect" title=" " alt="" coords="755,86,896,111"/>
<area shape="poly" title=" " alt="" coords="552,27,767,80,765,85,551,32"/>
<area shape="rect" title=" " alt="" coords="921,86,1085,111"/>
<area shape="poly" title=" " alt="" coords="551,22,708,44,908,76,934,81,933,86,908,81,707,50,550,27"/>
<area shape="rect" title=" " alt="" coords="1109,86,1283,111"/>
<area shape="poly" title=" " alt="" coords="551,20,784,39,940,56,1098,76,1127,81,1127,86,1097,81,939,61,783,45,551,25"/>
<area shape="rect" title=" " alt="" coords="1307,79,1509,119"/>
<area shape="poly" title=" " alt="" coords="551,18,856,36,1071,53,1294,76,1294,81,1071,58,856,41,551,24"/>
</map>
</div>
</div>
<p><a href="main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a59c2926dd9b0968badf463aaf4f91422" id="r_a59c2926dd9b0968badf463aaf4f91422"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a59c2926dd9b0968badf463aaf4f91422">displayMenu</a> ()</td></tr>
<tr class="memdesc:a59c2926dd9b0968badf463aaf4f91422"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays the main menu options to the user.  <br /></td></tr>
<tr class="separator:a59c2926dd9b0968badf463aaf4f91422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a209d2105e9ad36e42b5474ad80c9beba" id="r_a209d2105e9ad36e42b5474ad80c9beba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a209d2105e9ad36e42b5474ad80c9beba">getMenuChoice</a> ()</td></tr>
<tr class="memdesc:a209d2105e9ad36e42b5474ad80c9beba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a validated menu choice from the user.  <br /></td></tr>
<tr class="separator:a209d2105e9ad36e42b5474ad80c9beba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6daab01756f1d9db8bceb2d814bb9d67" id="r_a6daab01756f1d9db8bceb2d814bb9d67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a6daab01756f1d9db8bceb2d814bb9d67">displayUserList</a> (const UserDatabase &amp;db)</td></tr>
<tr class="memdesc:a6daab01756f1d9db8bceb2d814bb9d67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays a list of all users in the database.  <br /></td></tr>
<tr class="separator:a6daab01756f1d9db8bceb2d814bb9d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec92b3b4f77ae000120a3e30300a1629" id="r_aec92b3b4f77ae000120a3e30300a1629"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aec92b3b4f77ae000120a3e30300a1629">testAddUser</a> (UserDatabase &amp;db)</td></tr>
<tr class="memdesc:aec92b3b4f77ae000120a3e30300a1629"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test function for adding new users to the database.  <br /></td></tr>
<tr class="separator:aec92b3b4f77ae000120a3e30300a1629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8c2f8687c9ce381f10c5f0f1881331e" id="r_ad8c2f8687c9ce381f10c5f0f1881331e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad8c2f8687c9ce381f10c5f0f1881331e">testUpdateUser</a> (UserDatabase &amp;db)</td></tr>
<tr class="memdesc:ad8c2f8687c9ce381f10c5f0f1881331e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test function for updating existing users in the database.  <br /></td></tr>
<tr class="separator:ad8c2f8687c9ce381f10c5f0f1881331e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa337dbbf3d35bee99a64dabe2bbf7010" id="r_aa337dbbf3d35bee99a64dabe2bbf7010"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aa337dbbf3d35bee99a64dabe2bbf7010">testRemoveUser</a> (UserDatabase &amp;db)</td></tr>
<tr class="memdesc:aa337dbbf3d35bee99a64dabe2bbf7010"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test function for removing users from the database.  <br /></td></tr>
<tr class="separator:aa337dbbf3d35bee99a64dabe2bbf7010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78769662a640a3ea3888b98e7f796e41" id="r_a78769662a640a3ea3888b98e7f796e41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a78769662a640a3ea3888b98e7f796e41">testLogin</a> (UserDatabase &amp;db)</td></tr>
<tr class="memdesc:a78769662a640a3ea3888b98e7f796e41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test function for user login verification.  <br /></td></tr>
<tr class="separator:a78769662a640a3ea3888b98e7f796e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae24319bcaa52e6ba00cf94082acc13fc" id="r_ae24319bcaa52e6ba00cf94082acc13fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae24319bcaa52e6ba00cf94082acc13fc">testPasswordChange</a> (UserDatabase &amp;db)</td></tr>
<tr class="memdesc:ae24319bcaa52e6ba00cf94082acc13fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests the password change functionality with exception re-throwing.  <br /></td></tr>
<tr class="separator:ae24319bcaa52e6ba00cf94082acc13fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b88d72ff7c6feb61287ccb6c45387f6" id="r_a8b88d72ff7c6feb61287ccb6c45387f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a8b88d72ff7c6feb61287ccb6c45387f6">testClearFile</a> (UserDatabase &amp;db, const string &amp;filename)</td></tr>
<tr class="memdesc:a8b88d72ff7c6feb61287ccb6c45387f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test function for clearing the database file.  <br /></td></tr>
<tr class="separator:a8b88d72ff7c6feb61287ccb6c45387f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae3cc853b752a40d286780d2063f051e" id="r_aae3cc853b752a40d286780d2063f051e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aae3cc853b752a40d286780d2063f051e">testRandomAccess</a> (const string &amp;filename)</td></tr>
<tr class="memdesc:aae3cc853b752a40d286780d2063f051e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test function for random access to user records in binary file.  <br /></td></tr>
<tr class="separator:aae3cc853b752a40d286780d2063f051e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847b0409c1b2af26cd284feb8f2ccd5e" id="r_a847b0409c1b2af26cd284feb8f2ccd5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a847b0409c1b2af26cd284feb8f2ccd5e">testBadAllocException</a> (UserDatabase &amp;db)</td></tr>
<tr class="memdesc:a847b0409c1b2af26cd284feb8f2ccd5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test function to demonstrate handling of std::bad_alloc exceptions.  <br /></td></tr>
<tr class="separator:a847b0409c1b2af26cd284feb8f2ccd5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b549f355b604af82d673afb448d0d02" id="r_a8b549f355b604af82d673afb448d0d02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails</a> (const User *user)</td></tr>
<tr class="memdesc:a8b549f355b604af82d673afb448d0d02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays detailed information about a user.  <br /></td></tr>
<tr class="separator:a8b549f355b604af82d673afb448d0d02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0549ed85dfeb527c0bf5787ae0fd2166" id="r_a0549ed85dfeb527c0bf5787ae0fd2166"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0549ed85dfeb527c0bf5787ae0fd2166">pauseExecution</a> ()</td></tr>
<tr class="memdesc:a0549ed85dfeb527c0bf5787ae0fd2166"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pauses program execution until user presses Enter.  <br /></td></tr>
<tr class="separator:a0549ed85dfeb527c0bf5787ae0fd2166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4" id="r_ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point for the UserDatabase test program.  <br /></td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>User Database Testing Program. </p>
<p>This program provides a command-line interface to test various features of the UserDatabase class, including CRUD operations, authentication, and exception handling.</p>
<dl class="section author"><dt>Author</dt><dd>Carlos Nebril </dd></dl>
<dl class="section date"><dt>Date</dt><dd>April 25, 2025 </dd></dl>

<p class="definition">Definition in file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a59c2926dd9b0968badf463aaf4f91422" name="a59c2926dd9b0968badf463aaf4f91422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59c2926dd9b0968badf463aaf4f91422">&#9670;&#160;</a></span>displayMenu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayMenu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays the main menu options to the user. </p>
<p>Shows a formatted menu with numbered options for all available operations in the program. Options include user management, authentication testing, and file operations. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00153">153</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  153</span>                   {</div>
<div class="line"><span class="lineno">  154</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== Menu Options ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  155</span>    cout &lt;&lt; <span class="stringliteral">&quot;1. Display all users&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  156</span>    cout &lt;&lt; <span class="stringliteral">&quot;2. Add a new user&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  157</span>    cout &lt;&lt; <span class="stringliteral">&quot;3. Update an existing user&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  158</span>    cout &lt;&lt; <span class="stringliteral">&quot;4. Remove a user&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  159</span>    cout &lt;&lt; <span class="stringliteral">&quot;5. Test login&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  160</span>    cout &lt;&lt; <span class="stringliteral">&quot;6. Change a user&#39;s password&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  161</span>    cout &lt;&lt; <span class="stringliteral">&quot;7. Clear database file&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  162</span>    cout &lt;&lt; <span class="stringliteral">&quot;8. Test random access to user records&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  163</span>    cout &lt;&lt; <span class="stringliteral">&quot;9. Test bad_alloc exception handling&quot;</span> &lt;&lt; endl; </div>
<div class="line"><span class="lineno">  164</span>    cout &lt;&lt; <span class="stringliteral">&quot;0. Exit&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  165</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a59c2926dd9b0968badf463aaf4f91422_icgraph.png" border="0" usemap="#amain_8cpp_a59c2926dd9b0968badf463aaf4f91422_icgraph" alt=""/></div>
<map name="amain_8cpp_a59c2926dd9b0968badf463aaf4f91422_icgraph" id="amain_8cpp_a59c2926dd9b0968badf463aaf4f91422_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,213,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a8b549f355b604af82d673afb448d0d02" name="a8b549f355b604af82d673afb448d0d02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b549f355b604af82d673afb448d0d02">&#9670;&#160;</a></span>displayUserDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayUserDetails </td>
          <td>(</td>
          <td class="paramtype">const User *&#160;</td>
          <td class="paramname"><em>user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays detailed information about a user. </p>
<p>Shows user number, NIF, masked password, and role. Handles null user pointer gracefully by showing an error message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td>Pointer to the User object to display </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00727">727</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  727</span>                                          {</div>
<div class="line"><span class="lineno">  728</span>    <span class="keywordflow">if</span> (!user) {</div>
<div class="line"><span class="lineno">  729</span>        cout &lt;&lt; <span class="stringliteral">&quot;No user to display.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  730</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  731</span>    }</div>
<div class="line"><span class="lineno">  732</span>    </div>
<div class="line"><span class="lineno">  733</span>    cout &lt;&lt; <span class="stringliteral">&quot;---------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  734</span>    cout &lt;&lt; <span class="stringliteral">&quot;User Number: &quot;</span> &lt;&lt; user-&gt;getUsrNumber() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  735</span>    cout &lt;&lt; <span class="stringliteral">&quot;NIF: &quot;</span> &lt;&lt; user-&gt;getNIF() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  736</span>    cout &lt;&lt; <span class="stringliteral">&quot;Password: &quot;</span> &lt;&lt; string(strlen(user-&gt;getPwd().c_str()), <span class="charliteral">&#39;*&#39;</span>) &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  737</span>    cout &lt;&lt; <span class="stringliteral">&quot;Role: &quot;</span> &lt;&lt; (user-&gt;getRole() == User::ADMIN ? <span class="stringliteral">&quot;ADMIN&quot;</span> : <span class="stringliteral">&quot;EMPLOYEE&quot;</span>);</div>
<div class="line"><span class="lineno">  738</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n---------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  739</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#aec92b3b4f77ae000120a3e30300a1629">testAddUser()</a>, <a class="el" href="main_8cpp.html#a78769662a640a3ea3888b98e7f796e41">testLogin()</a>, <a class="el" href="main_8cpp.html#aa337dbbf3d35bee99a64dabe2bbf7010">testRemoveUser()</a>, and <a class="el" href="main_8cpp.html#ad8c2f8687c9ce381f10c5f0f1881331e">testUpdateUser()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a8b549f355b604af82d673afb448d0d02_icgraph.png" border="0" usemap="#amain_8cpp_a8b549f355b604af82d673afb448d0d02_icgraph" alt=""/></div>
<map name="amain_8cpp_a8b549f355b604af82d673afb448d0d02_icgraph" id="amain_8cpp_a8b549f355b604af82d673afb448d0d02_icgraph">
<area shape="rect" title=" " alt="" coords="287,80,432,105"/>
<area shape="rect" href="main_8cpp.html#aec92b3b4f77ae000120a3e30300a1629" title=" " alt="" coords="122,5,225,31"/>
<area shape="poly" title=" " alt="" coords="315,77,238,44,208,33,210,28,240,40,317,72"/>
<area shape="rect" href="main_8cpp.html#a78769662a640a3ea3888b98e7f796e41" title=" " alt="" coords="132,55,215,80"/>
<area shape="poly" title=" " alt="" coords="273,84,215,76,215,70,274,78"/>
<area shape="rect" href="main_8cpp.html#aa337dbbf3d35bee99a64dabe2bbf7010" title="Test function for removing users from the database." alt="" coords="108,104,239,129"/>
<area shape="poly" title=" " alt="" coords="274,106,239,111,239,106,273,101"/>
<area shape="rect" href="main_8cpp.html#ad8c2f8687c9ce381f10c5f0f1881331e" title=" " alt="" coords="111,153,235,179"/>
<area shape="poly" title=" " alt="" coords="315,113,240,143,208,156,206,151,238,138,313,108"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,80,60,105"/>
<area shape="poly" title=" " alt="" coords="122,38,109,44,52,82,49,78,107,40,120,33"/>
<area shape="poly" title=" " alt="" coords="119,80,61,90,60,85,118,75"/>
<area shape="poly" title=" " alt="" coords="94,106,60,100,61,95,95,101"/>
<area shape="poly" title=" " alt="" coords="123,151,107,143,50,108,53,103,109,138,125,146"/>
</map>
</div>

</div>
</div>
<a id="a6daab01756f1d9db8bceb2d814bb9d67" name="a6daab01756f1d9db8bceb2d814bb9d67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6daab01756f1d9db8bceb2d814bb9d67">&#9670;&#160;</a></span>displayUserList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayUserList </td>
          <td>(</td>
          <td class="paramtype">const UserDatabase &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays a list of all users in the database. </p>
<p>Retrieves all users from the database and displays their details. If no users are found, displays an appropriate message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Reference to the user database to query </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00234">234</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  234</span>                                             {</div>
<div class="line"><span class="lineno">  235</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== User List ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  236</span>    </div>
<div class="line"><span class="lineno">  237</span>    set&lt;User*&gt; users = db.getAllUsers();</div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">if</span> (users.empty()) {</div>
<div class="line"><span class="lineno">  239</span>        cout &lt;&lt; <span class="stringliteral">&quot;No users found in the database.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  241</span>    }</div>
<div class="line"><span class="lineno">  242</span>    </div>
<div class="line"><span class="lineno">  243</span>    cout &lt;&lt; <span class="stringliteral">&quot;Number of users: &quot;</span> &lt;&lt; users.size() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  244</span>    cout &lt;&lt; <span class="stringliteral">&quot;-----------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  245</span>    </div>
<div class="line"><span class="lineno">  246</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; user : users) {</div>
<div class="line"><span class="lineno">  247</span>        cout &lt;&lt; *user &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  248</span>        cout &lt;&lt; <span class="stringliteral">&quot;-----------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  249</span>    }</div>
<div class="line"><span class="lineno">  250</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a6daab01756f1d9db8bceb2d814bb9d67_icgraph.png" border="0" usemap="#amain_8cpp_a6daab01756f1d9db8bceb2d814bb9d67_icgraph" alt=""/></div>
<map name="amain_8cpp_a6daab01756f1d9db8bceb2d814bb9d67_icgraph" id="amain_8cpp_a6daab01756f1d9db8bceb2d814bb9d67_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,231,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a209d2105e9ad36e42b5474ad80c9beba" name="a209d2105e9ad36e42b5474ad80c9beba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a209d2105e9ad36e42b5474ad80c9beba">&#9670;&#160;</a></span>getMenuChoice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getMenuChoice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a validated menu choice from the user. </p>
<p>Ensures the input is a single digit between 0-9, handling various invalid input scenarios with appropriate error messages. Uses string-based input processing to avoid buffer issues and provides robust error handling.</p>
<dl class="section return"><dt>Returns</dt><dd>int The validated menu choice (0-9) </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00176">176</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  176</span>                    {</div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordtype">int</span> choice;</div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordtype">bool</span> validInput = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordtype">string</span> input;</div>
<div class="line"><span class="lineno">  180</span>    </div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">while</span> (!validInput) {</div>
<div class="line"><span class="lineno">  182</span>        cout &lt;&lt; <span class="stringliteral">&quot;Enter your choice (0-9): &quot;</span>;</div>
<div class="line"><span class="lineno">  183</span>        </div>
<div class="line"><span class="lineno">  184</span>        <span class="comment">// Read entire line as string</span></div>
<div class="line"><span class="lineno">  185</span>        getline(cin, input);</div>
<div class="line"><span class="lineno">  186</span>        </div>
<div class="line"><span class="lineno">  187</span>        <span class="comment">// Check if input contains only digits</span></div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordtype">bool</span> onlyDigits = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  189</span>        <span class="keywordflow">for</span> (<span class="keywordtype">char</span> c : input) {</div>
<div class="line"><span class="lineno">  190</span>            <span class="keywordflow">if</span> (!isdigit(c)) {</div>
<div class="line"><span class="lineno">  191</span>                onlyDigits = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  192</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  193</span>            }</div>
<div class="line"><span class="lineno">  194</span>        }</div>
<div class="line"><span class="lineno">  195</span>        </div>
<div class="line"><span class="lineno">  196</span>        <span class="comment">// Input should be exactly one digit between 0-9</span></div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">if</span> (!onlyDigits || input.empty()) {</div>
<div class="line"><span class="lineno">  198</span>            cout &lt;&lt; <span class="stringliteral">&quot;Invalid input. Please enter a number between 0 and 9.&quot;</span> </div>
<div class="line"><span class="lineno">  199</span>                 &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  200</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  201</span>        }</div>
<div class="line"><span class="lineno">  202</span>        </div>
<div class="line"><span class="lineno">  203</span>        <span class="comment">// Convert string to integer</span></div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  205</span>            choice = stoi(input);</div>
<div class="line"><span class="lineno">  206</span>            </div>
<div class="line"><span class="lineno">  207</span>            <span class="comment">// Check if number is in valid range</span></div>
<div class="line"><span class="lineno">  208</span>            <span class="keywordflow">if</span> (choice &lt; 0 || choice &gt; 9) {</div>
<div class="line"><span class="lineno">  209</span>                cout &lt;&lt; <span class="stringliteral">&quot;Invalid choice. Please enter a number between 0 and 9.&quot;</span></div>
<div class="line"><span class="lineno">  210</span>                     &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  211</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  212</span>            }</div>
<div class="line"><span class="lineno">  213</span>            </div>
<div class="line"><span class="lineno">  214</span>            <span class="comment">// If we get here, the input is valid</span></div>
<div class="line"><span class="lineno">  215</span>            validInput = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  216</span>        }</div>
<div class="line"><span class="lineno">  217</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> exception&amp;) {</div>
<div class="line"><span class="lineno">  218</span>            cout &lt;&lt; <span class="stringliteral">&quot;Invalid input. Please enter a number between 0 and 9.&quot;</span> </div>
<div class="line"><span class="lineno">  219</span>                 &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  220</span>        }</div>
<div class="line"><span class="lineno">  221</span>    }</div>
<div class="line"><span class="lineno">  222</span>    </div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordflow">return</span> choice;</div>
<div class="line"><span class="lineno">  224</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a209d2105e9ad36e42b5474ad80c9beba_icgraph.png" border="0" usemap="#amain_8cpp_a209d2105e9ad36e42b5474ad80c9beba_icgraph" alt=""/></div>
<map name="amain_8cpp_a209d2105e9ad36e42b5474ad80c9beba_icgraph" id="amain_8cpp_a209d2105e9ad36e42b5474ad80c9beba_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,231,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main entry point for the UserDatabase test program. </p>
<p>Initializes a test database file and provides a menu-driven interface for testing various database operations. The program demonstrates:</p><ul>
<li>User management (add, update, remove)</li>
<li>Authentication (login)</li>
<li>Password management</li>
<li>Exception handling</li>
<li>File operations</li>
</ul>
<p>The database is automatically saved when the program exits.</p>
<dl class="section return"><dt>Returns</dt><dd>int Exit status code (0 for successful execution) </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00065">65</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>           {</div>
<div class="line"><span class="lineno">   66</span>    cout &lt;&lt; <span class="stringliteral">&quot;=== UserDatabase Testing Program ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">   67</span>    </div>
<div class="line"><span class="lineno">   68</span>    <span class="comment">// Create a test database file</span></div>
<div class="line"><span class="lineno">   69</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* testFile = <span class="stringliteral">&quot;test_users&quot;</span>;</div>
<div class="line"><span class="lineno">   70</span>    UserDatabase db(testFile);</div>
<div class="line"><span class="lineno">   71</span>    </div>
<div class="line"><span class="lineno">   72</span>    cout &lt;&lt; <span class="stringliteral">&quot;UserDatabase initialized with file: &quot;</span> </div>
<div class="line"><span class="lineno">   73</span>         &lt;&lt; testFile &lt;&lt; <span class="stringliteral">&quot;.dat&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">   74</span>    </div>
<div class="line"><span class="lineno">   75</span>    <span class="keywordtype">int</span> choice = 0;</div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordtype">bool</span> exitProgram = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   77</span>    </div>
<div class="line"><span class="lineno">   78</span>    <span class="comment">// Main program loop</span></div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">while</span> (!exitProgram) {</div>
<div class="line"><span class="lineno">   80</span>        <a class="code hl_function" href="main_8cpp.html#a59c2926dd9b0968badf463aaf4f91422">displayMenu</a>();</div>
<div class="line"><span class="lineno">   81</span>        choice = <a class="code hl_function" href="main_8cpp.html#a209d2105e9ad36e42b5474ad80c9beba">getMenuChoice</a>();</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">switch</span> (choice) {</div>
<div class="line"><span class="lineno">   84</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">   85</span>                <a class="code hl_function" href="main_8cpp.html#a6daab01756f1d9db8bceb2d814bb9d67">displayUserList</a>(db);</div>
<div class="line"><span class="lineno">   86</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   87</span>                </div>
<div class="line"><span class="lineno">   88</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">   89</span>                <a class="code hl_function" href="main_8cpp.html#aec92b3b4f77ae000120a3e30300a1629">testAddUser</a>(db);</div>
<div class="line"><span class="lineno">   90</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   91</span>                </div>
<div class="line"><span class="lineno">   92</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">   93</span>                <a class="code hl_function" href="main_8cpp.html#ad8c2f8687c9ce381f10c5f0f1881331e">testUpdateUser</a>(db);</div>
<div class="line"><span class="lineno">   94</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   95</span>                </div>
<div class="line"><span class="lineno">   96</span>            <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno">   97</span>                <a class="code hl_function" href="main_8cpp.html#aa337dbbf3d35bee99a64dabe2bbf7010">testRemoveUser</a>(db);</div>
<div class="line"><span class="lineno">   98</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   99</span>                </div>
<div class="line"><span class="lineno">  100</span>            <span class="keywordflow">case</span> 5:</div>
<div class="line"><span class="lineno">  101</span>                <a class="code hl_function" href="main_8cpp.html#a78769662a640a3ea3888b98e7f796e41">testLogin</a>(db);</div>
<div class="line"><span class="lineno">  102</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  103</span>                </div>
<div class="line"><span class="lineno">  104</span>            <span class="keywordflow">case</span> 6:</div>
<div class="line"><span class="lineno">  105</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  106</span>                    <a class="code hl_function" href="main_8cpp.html#ae24319bcaa52e6ba00cf94082acc13fc">testPasswordChange</a>(db);</div>
<div class="line"><span class="lineno">  107</span>                }</div>
<div class="line"><span class="lineno">  108</span>                <span class="keywordflow">catch</span> (<span class="keyword">const</span> exception&amp; e) {</div>
<div class="line"><span class="lineno">  109</span>                    <span class="comment">// This will only be reached if an exception escapes testPasswordChange</span></div>
<div class="line"><span class="lineno">  110</span>                    cout &lt;&lt; <span class="stringliteral">&quot;Unhandled exception in password change operation: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  111</span>                }</div>
<div class="line"><span class="lineno">  112</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  113</span>                </div>
<div class="line"><span class="lineno">  114</span>            <span class="keywordflow">case</span> 7:</div>
<div class="line"><span class="lineno">  115</span>                <a class="code hl_function" href="main_8cpp.html#a8b88d72ff7c6feb61287ccb6c45387f6">testClearFile</a>(db, <span class="keywordtype">string</span>(testFile) + <span class="stringliteral">&quot;.dat&quot;</span>);</div>
<div class="line"><span class="lineno">  116</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  117</span>                </div>
<div class="line"><span class="lineno">  118</span>            <span class="keywordflow">case</span> 8:</div>
<div class="line"><span class="lineno">  119</span>                <a class="code hl_function" href="main_8cpp.html#aae3cc853b752a40d286780d2063f051e">testRandomAccess</a>(<span class="keywordtype">string</span>(testFile) + <span class="stringliteral">&quot;.dat&quot;</span>);</div>
<div class="line"><span class="lineno">  120</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  121</span>                </div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordflow">case</span> 9:</div>
<div class="line"><span class="lineno">  123</span>                <a class="code hl_function" href="main_8cpp.html#a847b0409c1b2af26cd284feb8f2ccd5e">testBadAllocException</a>(db);  <span class="comment">// New test function</span></div>
<div class="line"><span class="lineno">  124</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>            <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  127</span>                exitProgram = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  128</span>                cout &lt;&lt; <span class="stringliteral">&quot;Exiting program. Database will be saved.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  129</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  130</span>                </div>
<div class="line"><span class="lineno">  131</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  132</span>                cout &lt;&lt; <span class="stringliteral">&quot;Invalid choice. Please try again.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  133</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  134</span>        }</div>
<div class="line"><span class="lineno">  135</span>        </div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">if</span> (!exitProgram) {</div>
<div class="line"><span class="lineno">  137</span>            <a class="code hl_function" href="main_8cpp.html#a0549ed85dfeb527c0bf5787ae0fd2166">pauseExecution</a>();</div>
<div class="line"><span class="lineno">  138</span>        }</div>
<div class="line"><span class="lineno">  139</span>    }</div>
<div class="line"><span class="lineno">  140</span>    </div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  142</span>}</div>
<div class="ttc" id="amain_8cpp_html_a0549ed85dfeb527c0bf5787ae0fd2166"><div class="ttname"><a href="main_8cpp.html#a0549ed85dfeb527c0bf5787ae0fd2166">pauseExecution</a></div><div class="ttdeci">void pauseExecution()</div><div class="ttdoc">Pauses program execution until user presses Enter.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00749">main.cpp:749</a></div></div>
<div class="ttc" id="amain_8cpp_html_a209d2105e9ad36e42b5474ad80c9beba"><div class="ttname"><a href="main_8cpp.html#a209d2105e9ad36e42b5474ad80c9beba">getMenuChoice</a></div><div class="ttdeci">int getMenuChoice()</div><div class="ttdoc">Gets a validated menu choice from the user.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00176">main.cpp:176</a></div></div>
<div class="ttc" id="amain_8cpp_html_a59c2926dd9b0968badf463aaf4f91422"><div class="ttname"><a href="main_8cpp.html#a59c2926dd9b0968badf463aaf4f91422">displayMenu</a></div><div class="ttdeci">void displayMenu()</div><div class="ttdoc">Displays the main menu options to the user.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00153">main.cpp:153</a></div></div>
<div class="ttc" id="amain_8cpp_html_a6daab01756f1d9db8bceb2d814bb9d67"><div class="ttname"><a href="main_8cpp.html#a6daab01756f1d9db8bceb2d814bb9d67">displayUserList</a></div><div class="ttdeci">void displayUserList(const UserDatabase &amp;db)</div><div class="ttdoc">Displays a list of all users in the database.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00234">main.cpp:234</a></div></div>
<div class="ttc" id="amain_8cpp_html_a78769662a640a3ea3888b98e7f796e41"><div class="ttname"><a href="main_8cpp.html#a78769662a640a3ea3888b98e7f796e41">testLogin</a></div><div class="ttdeci">void testLogin(UserDatabase &amp;db)</div><div class="ttdoc">Test function for user login verification.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00447">main.cpp:447</a></div></div>
<div class="ttc" id="amain_8cpp_html_a847b0409c1b2af26cd284feb8f2ccd5e"><div class="ttname"><a href="main_8cpp.html#a847b0409c1b2af26cd284feb8f2ccd5e">testBadAllocException</a></div><div class="ttdeci">void testBadAllocException(UserDatabase &amp;db)</div><div class="ttdoc">Test function to demonstrate handling of std::bad_alloc exceptions.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00686">main.cpp:686</a></div></div>
<div class="ttc" id="amain_8cpp_html_a8b88d72ff7c6feb61287ccb6c45387f6"><div class="ttname"><a href="main_8cpp.html#a8b88d72ff7c6feb61287ccb6c45387f6">testClearFile</a></div><div class="ttdeci">void testClearFile(UserDatabase &amp;db, const string &amp;filename)</div><div class="ttdoc">Test function for clearing the database file.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00570">main.cpp:570</a></div></div>
<div class="ttc" id="amain_8cpp_html_aa337dbbf3d35bee99a64dabe2bbf7010"><div class="ttname"><a href="main_8cpp.html#aa337dbbf3d35bee99a64dabe2bbf7010">testRemoveUser</a></div><div class="ttdeci">void testRemoveUser(UserDatabase &amp;db)</div><div class="ttdoc">Test function for removing users from the database.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00395">main.cpp:395</a></div></div>
<div class="ttc" id="amain_8cpp_html_aae3cc853b752a40d286780d2063f051e"><div class="ttname"><a href="main_8cpp.html#aae3cc853b752a40d286780d2063f051e">testRandomAccess</a></div><div class="ttdeci">void testRandomAccess(const string &amp;filename)</div><div class="ttdoc">Test function for random access to user records in binary file.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00602">main.cpp:602</a></div></div>
<div class="ttc" id="amain_8cpp_html_ad8c2f8687c9ce381f10c5f0f1881331e"><div class="ttname"><a href="main_8cpp.html#ad8c2f8687c9ce381f10c5f0f1881331e">testUpdateUser</a></div><div class="ttdeci">void testUpdateUser(UserDatabase &amp;db)</div><div class="ttdoc">Test function for updating existing users in the database.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00317">main.cpp:317</a></div></div>
<div class="ttc" id="amain_8cpp_html_ae24319bcaa52e6ba00cf94082acc13fc"><div class="ttname"><a href="main_8cpp.html#ae24319bcaa52e6ba00cf94082acc13fc">testPasswordChange</a></div><div class="ttdeci">void testPasswordChange(UserDatabase &amp;db)</div><div class="ttdoc">Tests the password change functionality with exception re-throwing.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00489">main.cpp:489</a></div></div>
<div class="ttc" id="amain_8cpp_html_aec92b3b4f77ae000120a3e30300a1629"><div class="ttname"><a href="main_8cpp.html#aec92b3b4f77ae000120a3e30300a1629">testAddUser</a></div><div class="ttdeci">void testAddUser(UserDatabase &amp;db)</div><div class="ttdoc">Test function for adding new users to the database.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00261">main.cpp:261</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8cpp.html#a59c2926dd9b0968badf463aaf4f91422">displayMenu()</a>, <a class="el" href="main_8cpp.html#a6daab01756f1d9db8bceb2d814bb9d67">displayUserList()</a>, <a class="el" href="main_8cpp.html#a209d2105e9ad36e42b5474ad80c9beba">getMenuChoice()</a>, <a class="el" href="main_8cpp.html#a0549ed85dfeb527c0bf5787ae0fd2166">pauseExecution()</a>, <a class="el" href="main_8cpp.html#aec92b3b4f77ae000120a3e30300a1629">testAddUser()</a>, <a class="el" href="main_8cpp.html#a847b0409c1b2af26cd284feb8f2ccd5e">testBadAllocException()</a>, <a class="el" href="main_8cpp.html#a8b88d72ff7c6feb61287ccb6c45387f6">testClearFile()</a>, <a class="el" href="main_8cpp.html#a78769662a640a3ea3888b98e7f796e41">testLogin()</a>, <a class="el" href="main_8cpp.html#ae24319bcaa52e6ba00cf94082acc13fc">testPasswordChange()</a>, <a class="el" href="main_8cpp.html#aae3cc853b752a40d286780d2063f051e">testRandomAccess()</a>, <a class="el" href="main_8cpp.html#aa337dbbf3d35bee99a64dabe2bbf7010">testRemoveUser()</a>, and <a class="el" href="main_8cpp.html#ad8c2f8687c9ce381f10c5f0f1881331e">testUpdateUser()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph.png" border="0" usemap="#amain_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph" alt=""/></div>
<map name="amain_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph" id="amain_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph">
<area shape="rect" title=" " alt="" coords="5,277,60,303"/>
<area shape="rect" href="main_8cpp.html#a59c2926dd9b0968badf463aaf4f91422" title=" " alt="" coords="139,5,245,31"/>
<area shape="poly" title=" " alt="" coords="31,277,33,232,43,169,52,134,65,100,83,68,106,40,125,27,128,32,110,44,88,71,70,103,57,136,48,170,39,233,36,277"/>
<area shape="rect" href="main_8cpp.html#a6daab01756f1d9db8bceb2d814bb9d67" title=" " alt="" coords="131,55,253,80"/>
<area shape="poly" title=" " alt="" coords="32,277,37,240,49,190,71,136,87,111,106,89,117,81,120,86,110,93,91,114,76,139,54,191,42,241,38,278"/>
<area shape="rect" href="main_8cpp.html#a209d2105e9ad36e42b5474ad80c9beba" title=" " alt="" coords="131,104,253,129"/>
<area shape="poly" title=" " alt="" coords="34,276,42,248,56,211,77,172,106,139,117,131,120,136,110,143,81,175,61,213,47,250,39,278"/>
<area shape="rect" href="main_8cpp.html#a0549ed85dfeb527c0bf5787ae0fd2166" title=" " alt="" coords="130,153,254,179"/>
<area shape="poly" title=" " alt="" coords="38,276,63,233,83,209,106,188,116,182,119,187,110,192,87,212,68,236,42,279"/>
<area shape="rect" href="main_8cpp.html#aec92b3b4f77ae000120a3e30300a1629" title=" " alt="" coords="141,203,243,228"/>
<area shape="poly" title=" " alt="" coords="48,275,75,256,107,237,126,229,128,234,109,242,78,260,51,279"/>
<area shape="rect" href="main_8cpp.html#a847b0409c1b2af26cd284feb8f2ccd5e" title="Test function to demonstrate handling of std::bad_alloc exceptions." alt="" coords="108,252,276,277"/>
<area shape="poly" title=" " alt="" coords="60,283,98,277,99,282,61,288"/>
<area shape="rect" href="main_8cpp.html#a8b88d72ff7c6feb61287ccb6c45387f6" title=" " alt="" coords="140,301,244,327"/>
<area shape="poly" title=" " alt="" coords="61,291,127,301,126,307,60,297"/>
<area shape="rect" href="main_8cpp.html#a78769662a640a3ea3888b98e7f796e41" title=" " alt="" coords="151,351,233,376"/>
<area shape="poly" title=" " alt="" coords="52,301,109,336,138,347,136,352,107,340,49,305"/>
<area shape="rect" href="main_8cpp.html#ae24319bcaa52e6ba00cf94082acc13fc" title="Tests the password change functionality with exception re&#45;throwing." alt="" coords="113,400,271,425"/>
<area shape="poly" title=" " alt="" coords="43,301,68,343,87,366,110,385,122,392,119,397,106,389,83,369,64,346,38,304"/>
<area shape="rect" href="main_8cpp.html#aae3cc853b752a40d286780d2063f051e" title=" " alt="" coords="119,449,265,475"/>
<area shape="poly" title=" " alt="" coords="39,302,61,365,82,403,110,435,118,441,115,445,106,439,77,406,56,368,34,304"/>
<area shape="rect" href="main_8cpp.html#aa337dbbf3d35bee99a64dabe2bbf7010" title="Test function for removing users from the database." alt="" coords="127,499,257,524"/>
<area shape="poly" title=" " alt="" coords="38,303,43,339,55,388,76,439,91,463,110,484,117,490,113,494,106,488,87,466,72,442,50,389,38,340,32,304"/>
<area shape="rect" href="main_8cpp.html#ad8c2f8687c9ce381f10c5f0f1881331e" title=" " alt="" coords="130,548,254,573"/>
<area shape="poly" title=" " alt="" coords="37,303,39,346,49,408,58,442,71,475,88,506,110,533,120,541,116,545,106,537,83,509,66,477,53,444,43,409,34,347,31,303"/>
<area shape="rect" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02" title=" " alt="" coords="324,425,469,451"/>
<area shape="poly" title=" " alt="" coords="245,221,278,237,318,278,350,326,374,373,389,411,384,413,369,375,346,329,314,281,274,242,242,226"/>
<area shape="poly" title=" " alt="" coords="234,371,277,385,356,417,354,422,275,390,233,377"/>
<area shape="poly" title=" " alt="" coords="236,496,275,483,352,454,354,459,277,489,238,501"/>
<area shape="poly" title=" " alt="" coords="245,546,275,533,328,497,371,459,374,463,331,501,277,538,247,550"/>
</map>
</div>

</div>
</div>
<a id="a0549ed85dfeb527c0bf5787ae0fd2166" name="a0549ed85dfeb527c0bf5787ae0fd2166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0549ed85dfeb527c0bf5787ae0fd2166">&#9670;&#160;</a></span>pauseExecution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pauseExecution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pauses program execution until user presses Enter. </p>
<p>Provides a clean way to pause the program between operations, allowing the user to view results before continuing. Handles input buffer clearing to ensure consistent behavior regardless of previous input operations. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00749">749</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  749</span>                      {</div>
<div class="line"><span class="lineno">  750</span>    cout &lt;&lt; <span class="stringliteral">&quot;\nPress Enter to continue...&quot;</span>;</div>
<div class="line"><span class="lineno">  751</span>    </div>
<div class="line"><span class="lineno">  752</span>    <span class="comment">// Clean input buffer and wait for Enter</span></div>
<div class="line"><span class="lineno">  753</span>    <span class="keywordflow">if</span> (cin.peek() == <span class="charliteral">&#39;\n&#39;</span>) {</div>
<div class="line"><span class="lineno">  754</span>        <span class="comment">// If there&#39;s a pending newline character, consume it</span></div>
<div class="line"><span class="lineno">  755</span>        cin.get();</div>
<div class="line"><span class="lineno">  756</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  757</span>        <span class="comment">// If there&#39;s no pending newline or other characters in buffer,</span></div>
<div class="line"><span class="lineno">  758</span>        <span class="comment">// clear the entire buffer up to the next newline</span></div>
<div class="line"><span class="lineno">  759</span>        cin.ignore(numeric_limits&lt;streamsize&gt;::max(), <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno">  760</span>    }</div>
<div class="line"><span class="lineno">  761</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a0549ed85dfeb527c0bf5787ae0fd2166_icgraph.png" border="0" usemap="#amain_8cpp_a0549ed85dfeb527c0bf5787ae0fd2166_icgraph" alt=""/></div>
<map name="amain_8cpp_a0549ed85dfeb527c0bf5787ae0fd2166_icgraph" id="amain_8cpp_a0549ed85dfeb527c0bf5787ae0fd2166_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,232,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="aec92b3b4f77ae000120a3e30300a1629" name="aec92b3b4f77ae000120a3e30300a1629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec92b3b4f77ae000120a3e30300a1629">&#9670;&#160;</a></span>testAddUser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testAddUser </td>
          <td>(</td>
          <td class="paramtype">UserDatabase &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test function for adding new users to the database. </p>
<p>Prompts for user information (number, NIF, password, role), creates the appropriate User object, and attempts to add it to the database. Handles potential exceptions during user creation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Reference to the user database </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00261">261</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  261</span>                                   {</div>
<div class="line"><span class="lineno">  262</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== Add New User ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  263</span>    </div>
<div class="line"><span class="lineno">  264</span>    u_int32_t usrNumber;</div>
<div class="line"><span class="lineno">  265</span>    <span class="keywordtype">char</span> NIF[User::MAX_NIF];</div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordtype">char</span> pwd[User::MAX_STR];</div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordtype">int</span> roleChoice;</div>
<div class="line"><span class="lineno">  268</span>    </div>
<div class="line"><span class="lineno">  269</span>    <span class="comment">// Get user input for new user</span></div>
<div class="line"><span class="lineno">  270</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter user number (10000-99999): &quot;</span>;</div>
<div class="line"><span class="lineno">  271</span>    cin &gt;&gt; usrNumber;</div>
<div class="line"><span class="lineno">  272</span>    </div>
<div class="line"><span class="lineno">  273</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter NIF (up to &quot;</span> &lt;&lt; User::MAX_NIF - 1 &lt;&lt; <span class="stringliteral">&quot; characters): &quot;</span>;</div>
<div class="line"><span class="lineno">  274</span>    cin &gt;&gt; NIF;</div>
<div class="line"><span class="lineno">  275</span>    </div>
<div class="line"><span class="lineno">  276</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter password: &quot;</span>;</div>
<div class="line"><span class="lineno">  277</span>    cin &gt;&gt; pwd;</div>
<div class="line"><span class="lineno">  278</span>    </div>
<div class="line"><span class="lineno">  279</span>    cout &lt;&lt; <span class="stringliteral">&quot;Select role (0 for ADMIN, 1 for EMPLOYEE): &quot;</span>;</div>
<div class="line"><span class="lineno">  280</span>    cin &gt;&gt; roleChoice;</div>
<div class="line"><span class="lineno">  281</span>    </div>
<div class="line"><span class="lineno">  282</span>    User* newUser = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  283</span>    </div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  285</span>        <span class="comment">// Create appropriate user type</span></div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordflow">if</span> (roleChoice == 0) {</div>
<div class="line"><span class="lineno">  287</span>            newUser = <span class="keyword">new</span> Admin(usrNumber, NIF, pwd, User::ADMIN);</div>
<div class="line"><span class="lineno">  288</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  289</span>            newUser = <span class="keyword">new</span> Employee(usrNumber, NIF, pwd, User::EMPLOYEE);</div>
<div class="line"><span class="lineno">  290</span>        }</div>
<div class="line"><span class="lineno">  291</span>        </div>
<div class="line"><span class="lineno">  292</span>        <span class="comment">// Try to add user to database</span></div>
<div class="line"><span class="lineno">  293</span>        <span class="keywordflow">if</span> (db.addUser(newUser)) {</div>
<div class="line"><span class="lineno">  294</span>            cout &lt;&lt; <span class="stringliteral">&quot;User added successfully!&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  295</span>            <a class="code hl_function" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails</a>(newUser);</div>
<div class="line"><span class="lineno">  296</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  297</span>            cout &lt;&lt; <span class="stringliteral">&quot;Failed to add user. User with number &quot;</span> </div>
<div class="line"><span class="lineno">  298</span>                 &lt;&lt; usrNumber &lt;&lt; <span class="stringliteral">&quot; may already exist.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  299</span>            <span class="keyword">delete</span> newUser; <span class="comment">// Clean up if not added to database</span></div>
<div class="line"><span class="lineno">  300</span>        }</div>
<div class="line"><span class="lineno">  301</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> exception&amp; e) {</div>
<div class="line"><span class="lineno">  302</span>        cout &lt;&lt; <span class="stringliteral">&quot;Error creating user: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  303</span>        <span class="keywordflow">if</span> (newUser) <span class="keyword">delete</span> newUser;</div>
<div class="line"><span class="lineno">  304</span>    }</div>
<div class="line"><span class="lineno">  305</span>}</div>
<div class="ttc" id="amain_8cpp_html_a8b549f355b604af82d673afb448d0d02"><div class="ttname"><a href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails</a></div><div class="ttdeci">void displayUserDetails(const User *user)</div><div class="ttdoc">Displays detailed information about a user.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00727">main.cpp:727</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails()</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_aec92b3b4f77ae000120a3e30300a1629_cgraph.png" border="0" usemap="#amain_8cpp_aec92b3b4f77ae000120a3e30300a1629_cgraph" alt=""/></div>
<map name="amain_8cpp_aec92b3b4f77ae000120a3e30300a1629_cgraph" id="amain_8cpp_aec92b3b4f77ae000120a3e30300a1629_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,108,31"/>
<area shape="rect" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02" title=" " alt="" coords="156,5,301,31"/>
<area shape="poly" title=" " alt="" coords="108,15,142,15,142,21,108,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_aec92b3b4f77ae000120a3e30300a1629_icgraph.png" border="0" usemap="#amain_8cpp_aec92b3b4f77ae000120a3e30300a1629_icgraph" alt=""/></div>
<map name="amain_8cpp_aec92b3b4f77ae000120a3e30300a1629_icgraph" id="amain_8cpp_aec92b3b4f77ae000120a3e30300a1629_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,211,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a847b0409c1b2af26cd284feb8f2ccd5e" name="a847b0409c1b2af26cd284feb8f2ccd5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a847b0409c1b2af26cd284feb8f2ccd5e">&#9670;&#160;</a></span>testBadAllocException()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testBadAllocException </td>
          <td>(</td>
          <td class="paramtype">UserDatabase &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test function to demonstrate handling of std::bad_alloc exceptions. </p>
<p>This function deliberately attempts to allocate an excessive amount of memory to trigger a std::bad_alloc exception, then shows proper exception handling.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Reference to the user database (not used but kept for consistency) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00686">686</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  686</span>                                             {</div>
<div class="line"><span class="lineno">  687</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== Testing std::bad_alloc Exception Handling ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  688</span>    </div>
<div class="line"><span class="lineno">  689</span>    <span class="comment">// Size that will likely trigger a bad_alloc exception on most systems</span></div>
<div class="line"><span class="lineno">  690</span>    <span class="comment">// Using size_t max value effectively requests all available memory</span></div>
<div class="line"><span class="lineno">  691</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> HUGE_SIZE = std::numeric_limits&lt;size_t&gt;::max() / 10;</div>
<div class="line"><span class="lineno">  692</span>    </div>
<div class="line"><span class="lineno">  693</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  694</span>        cout &lt;&lt; <span class="stringliteral">&quot;Attempting to allocate &quot;</span> &lt;&lt; HUGE_SIZE </div>
<div class="line"><span class="lineno">  695</span>             &lt;&lt; <span class="stringliteral">&quot; bytes of memory...&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  696</span>        </div>
<div class="line"><span class="lineno">  697</span>        <span class="comment">// This will almost certainly fail and throw std::bad_alloc</span></div>
<div class="line"><span class="lineno">  698</span>        <span class="keywordtype">int</span>* hugeArray = <span class="keyword">new</span> <span class="keywordtype">int</span>[HUGE_SIZE];</div>
<div class="line"><span class="lineno">  699</span>        </div>
<div class="line"><span class="lineno">  700</span>        <span class="comment">// This code should never execute if the allocation fails as expected</span></div>
<div class="line"><span class="lineno">  701</span>        cout &lt;&lt; <span class="stringliteral">&quot;Allocation successful (unexpected!)&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  702</span>        <span class="keyword">delete</span>[] hugeArray;  <span class="comment">// Clean up if allocation somehow succeeds</span></div>
<div class="line"><span class="lineno">  703</span>    }</div>
<div class="line"><span class="lineno">  704</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::bad_alloc&amp; e) {</div>
<div class="line"><span class="lineno">  705</span>        <span class="comment">// Specific handler for memory allocation failure</span></div>
<div class="line"><span class="lineno">  706</span>        cout &lt;&lt; <span class="stringliteral">&quot;Memory allocation failed as expected!&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  707</span>        cout &lt;&lt; <span class="stringliteral">&quot;Exception details: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  708</span>        cout &lt;&lt; <span class="stringliteral">&quot;This demonstrates proper handling of std::bad_alloc&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  709</span>    }</div>
<div class="line"><span class="lineno">  710</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  711</span>        <span class="comment">// Generic handler for other exceptions</span></div>
<div class="line"><span class="lineno">  712</span>        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  713</span>    }</div>
<div class="line"><span class="lineno">  714</span>    </div>
<div class="line"><span class="lineno">  715</span>    <span class="comment">// Parameter is not used but kept for consistency with other test functions</span></div>
<div class="line"><span class="lineno">  716</span>    (void)db;</div>
<div class="line"><span class="lineno">  717</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a847b0409c1b2af26cd284feb8f2ccd5e_icgraph.png" border="0" usemap="#amain_8cpp_a847b0409c1b2af26cd284feb8f2ccd5e_icgraph" alt=""/></div>
<map name="amain_8cpp_a847b0409c1b2af26cd284feb8f2ccd5e_icgraph" id="amain_8cpp_a847b0409c1b2af26cd284feb8f2ccd5e_icgraph">
<area shape="rect" title="Test function to demonstrate handling of std::bad_alloc exceptions." alt="" coords="108,5,276,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a8b88d72ff7c6feb61287ccb6c45387f6" name="a8b88d72ff7c6feb61287ccb6c45387f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b88d72ff7c6feb61287ccb6c45387f6">&#9670;&#160;</a></span>testClearFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testClearFile </td>
          <td>(</td>
          <td class="paramtype">UserDatabase &amp;&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test function for clearing the database file. </p>
<p>Prompts for confirmation and then removes all users from the database file, except for the default administrator. Handles potential exceptions during the clear operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Reference to the user database </td></tr>
    <tr><td class="paramname">filename</td><td>The name of the database file to clear </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00570">570</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  570</span>                                                             {</div>
<div class="line"><span class="lineno">  571</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== Clear Database File ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  572</span>    </div>
<div class="line"><span class="lineno">  573</span>    <span class="keywordtype">char</span> confirm;</div>
<div class="line"><span class="lineno">  574</span>    cout &lt;&lt; <span class="stringliteral">&quot;WARNING: This will delete all users from the file.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  575</span>    cout &lt;&lt; <span class="stringliteral">&quot;Are you sure? (y/n): &quot;</span>;</div>
<div class="line"><span class="lineno">  576</span>    cin &gt;&gt; confirm;</div>
<div class="line"><span class="lineno">  577</span>    </div>
<div class="line"><span class="lineno">  578</span>    <span class="keywordflow">if</span> (tolower(confirm) == <span class="charliteral">&#39;y&#39;</span>) {</div>
<div class="line"><span class="lineno">  579</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  580</span>            <span class="keywordflow">if</span> (db.clearFile(filename.c_str())) {</div>
<div class="line"><span class="lineno">  581</span>                cout &lt;&lt; <span class="stringliteral">&quot;Database file cleared successfully.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  582</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  583</span>                cout &lt;&lt; <span class="stringliteral">&quot;Failed to clear database file.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  584</span>            }</div>
<div class="line"><span class="lineno">  585</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> runtime_error&amp; e) {</div>
<div class="line"><span class="lineno">  586</span>            cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  587</span>        }</div>
<div class="line"><span class="lineno">  588</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  589</span>        cout &lt;&lt; <span class="stringliteral">&quot;Operation cancelled.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  590</span>    }</div>
<div class="line"><span class="lineno">  591</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a8b88d72ff7c6feb61287ccb6c45387f6_icgraph.png" border="0" usemap="#amain_8cpp_a8b88d72ff7c6feb61287ccb6c45387f6_icgraph" alt=""/></div>
<map name="amain_8cpp_a8b88d72ff7c6feb61287ccb6c45387f6_icgraph" id="amain_8cpp_a8b88d72ff7c6feb61287ccb6c45387f6_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,212,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a78769662a640a3ea3888b98e7f796e41" name="a78769662a640a3ea3888b98e7f796e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78769662a640a3ea3888b98e7f796e41">&#9670;&#160;</a></span>testLogin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testLogin </td>
          <td>(</td>
          <td class="paramtype">UserDatabase &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test function for user login verification. </p>
<p>Prompts for login credentials (user number, NIF, password) and attempts to authenticate the user. Displays success or failure message and shows user details if login is successful.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Reference to the user database </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00447">447</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  447</span>                                 {</div>
<div class="line"><span class="lineno">  448</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== User Login ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  449</span>    </div>
<div class="line"><span class="lineno">  450</span>    u_int32_t usrNumber;</div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordtype">char</span> NIF[User::MAX_NIF];</div>
<div class="line"><span class="lineno">  452</span>    <span class="keywordtype">char</span> pwd[User::MAX_STR];</div>
<div class="line"><span class="lineno">  453</span>    </div>
<div class="line"><span class="lineno">  454</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter user number: &quot;</span>;</div>
<div class="line"><span class="lineno">  455</span>    cin &gt;&gt; usrNumber;</div>
<div class="line"><span class="lineno">  456</span>    </div>
<div class="line"><span class="lineno">  457</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter NIF: &quot;</span>;</div>
<div class="line"><span class="lineno">  458</span>    cin &gt;&gt; NIF;</div>
<div class="line"><span class="lineno">  459</span>    </div>
<div class="line"><span class="lineno">  460</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter password: &quot;</span>;</div>
<div class="line"><span class="lineno">  461</span>    cin &gt;&gt; pwd;</div>
<div class="line"><span class="lineno">  462</span>    </div>
<div class="line"><span class="lineno">  463</span>    <span class="comment">// Attempt login</span></div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordtype">string</span> passwordStr(pwd);</div>
<div class="line"><span class="lineno">  465</span>    User* loggedInUser = db.login(usrNumber, NIF, passwordStr);</div>
<div class="line"><span class="lineno">  466</span>    </div>
<div class="line"><span class="lineno">  467</span>    <span class="keywordflow">if</span> (loggedInUser) {</div>
<div class="line"><span class="lineno">  468</span>        cout &lt;&lt; <span class="stringliteral">&quot;Login successful!&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  469</span>        cout &lt;&lt; <span class="stringliteral">&quot;Welcome, &quot;</span> </div>
<div class="line"><span class="lineno">  470</span>             &lt;&lt; (loggedInUser-&gt;getRole() == User::ADMIN</div>
<div class="line"><span class="lineno">  471</span>                 ? <span class="stringliteral">&quot;Administrator&quot;</span> : <span class="stringliteral">&quot;Employee&quot;</span>) </div>
<div class="line"><span class="lineno">  472</span>             &lt;&lt; <span class="stringliteral">&quot; #&quot;</span> &lt;&lt; loggedInUser-&gt;getUsrNumber() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  473</span>        <a class="code hl_function" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails</a>(loggedInUser);</div>
<div class="line"><span class="lineno">  474</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  475</span>        cout &lt;&lt; <span class="stringliteral">&quot;Login failed. Invalid credentials.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  476</span>    }</div>
<div class="line"><span class="lineno">  477</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails()</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a78769662a640a3ea3888b98e7f796e41_cgraph.png" border="0" usemap="#amain_8cpp_a78769662a640a3ea3888b98e7f796e41_cgraph" alt=""/></div>
<map name="amain_8cpp_a78769662a640a3ea3888b98e7f796e41_cgraph" id="amain_8cpp_a78769662a640a3ea3888b98e7f796e41_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,88,31"/>
<area shape="rect" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02" title=" " alt="" coords="136,5,281,31"/>
<area shape="poly" title=" " alt="" coords="88,15,122,15,122,21,88,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a78769662a640a3ea3888b98e7f796e41_icgraph.png" border="0" usemap="#amain_8cpp_a78769662a640a3ea3888b98e7f796e41_icgraph" alt=""/></div>
<map name="amain_8cpp_a78769662a640a3ea3888b98e7f796e41_icgraph" id="amain_8cpp_a78769662a640a3ea3888b98e7f796e41_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,191,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="ae24319bcaa52e6ba00cf94082acc13fc" name="ae24319bcaa52e6ba00cf94082acc13fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae24319bcaa52e6ba00cf94082acc13fc">&#9670;&#160;</a></span>testPasswordChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testPasswordChange </td>
          <td>(</td>
          <td class="paramtype">UserDatabase &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tests the password change functionality with exception re-throwing. </p>
<p>This function demonstrates exception re-throwing by:</p><ol type="1">
<li>Catching authentication exceptions</li>
<li>Logging information about the error</li>
<li>Re-throwing the exception to be handled at a higher level</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Reference to the user database </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00489">489</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  489</span>                                          {</div>
<div class="line"><span class="lineno">  490</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== Change User Password ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  491</span>    </div>
<div class="line"><span class="lineno">  492</span>    <span class="comment">// First, login to get an active user</span></div>
<div class="line"><span class="lineno">  493</span>    u_int32_t activeUsrNumber;</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordtype">char</span> activeNIF[User::MAX_NIF];</div>
<div class="line"><span class="lineno">  495</span>    <span class="keywordtype">char</span> activePwd[User::MAX_STR];</div>
<div class="line"><span class="lineno">  496</span>    </div>
<div class="line"><span class="lineno">  497</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  498</span>        cout &lt;&lt; <span class="stringliteral">&quot;First, please login:&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  499</span>        cout &lt;&lt; <span class="stringliteral">&quot;Enter your user number: &quot;</span>;</div>
<div class="line"><span class="lineno">  500</span>        cin &gt;&gt; activeUsrNumber;</div>
<div class="line"><span class="lineno">  501</span>        </div>
<div class="line"><span class="lineno">  502</span>        cout &lt;&lt; <span class="stringliteral">&quot;Enter your NIF: &quot;</span>;</div>
<div class="line"><span class="lineno">  503</span>        cin &gt;&gt; activeNIF;</div>
<div class="line"><span class="lineno">  504</span>        </div>
<div class="line"><span class="lineno">  505</span>        cout &lt;&lt; <span class="stringliteral">&quot;Enter your password: &quot;</span>;</div>
<div class="line"><span class="lineno">  506</span>        cin &gt;&gt; activePwd;</div>
<div class="line"><span class="lineno">  507</span>        </div>
<div class="line"><span class="lineno">  508</span>        <span class="comment">// Attempt login</span></div>
<div class="line"><span class="lineno">  509</span>        <span class="keywordtype">string</span> passwordStr(activePwd);</div>
<div class="line"><span class="lineno">  510</span>        User* activeUser = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  511</span>        </div>
<div class="line"><span class="lineno">  512</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  513</span>            activeUser = db.login(activeUsrNumber, activeNIF, passwordStr);</div>
<div class="line"><span class="lineno">  514</span>            </div>
<div class="line"><span class="lineno">  515</span>            <span class="keywordflow">if</span> (!activeUser) {</div>
<div class="line"><span class="lineno">  516</span>                <span class="keywordflow">throw</span> runtime_error(<span class="stringliteral">&quot;Login failed: Invalid credentials&quot;</span>);</div>
<div class="line"><span class="lineno">  517</span>            }</div>
<div class="line"><span class="lineno">  518</span>            </div>
<div class="line"><span class="lineno">  519</span>            <span class="comment">// Get the user whose password will be changed</span></div>
<div class="line"><span class="lineno">  520</span>            u_int32_t targetUsrNumber;</div>
<div class="line"><span class="lineno">  521</span>            cout &lt;&lt; <span class="stringliteral">&quot;Enter the user number whose password you want to change: &quot;</span>;</div>
<div class="line"><span class="lineno">  522</span>            cin &gt;&gt; targetUsrNumber;</div>
<div class="line"><span class="lineno">  523</span>            </div>
<div class="line"><span class="lineno">  524</span>            User* targetUser = db.findUserByNumber(targetUsrNumber);</div>
<div class="line"><span class="lineno">  525</span>            <span class="keywordflow">if</span> (!targetUser) {</div>
<div class="line"><span class="lineno">  526</span>                <span class="keywordflow">throw</span> runtime_error(<span class="stringliteral">&quot;User not found&quot;</span>);</div>
<div class="line"><span class="lineno">  527</span>            }</div>
<div class="line"><span class="lineno">  528</span>            </div>
<div class="line"><span class="lineno">  529</span>            <span class="comment">// Check if active user has permission</span></div>
<div class="line"><span class="lineno">  530</span>            <span class="keywordflow">if</span> (activeUser-&gt;getRole() != User::ADMIN &amp;&amp; </div>
<div class="line"><span class="lineno">  531</span>                activeUser-&gt;getUsrNumber() != targetUser-&gt;getUsrNumber()) {</div>
<div class="line"><span class="lineno">  532</span>                <span class="keywordflow">throw</span> runtime_error(<span class="stringliteral">&quot;Permission denied&quot;</span>);</div>
<div class="line"><span class="lineno">  533</span>            }</div>
<div class="line"><span class="lineno">  534</span>            </div>
<div class="line"><span class="lineno">  535</span>            <span class="comment">// Attempt password change</span></div>
<div class="line"><span class="lineno">  536</span>            <span class="keywordflow">if</span> (db.changeUserPass(activeUser, targetUser)) {</div>
<div class="line"><span class="lineno">  537</span>                cout &lt;&lt; <span class="stringliteral">&quot;Password changed successfully.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  538</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  539</span>                <span class="keywordflow">throw</span> runtime_error(<span class="stringliteral">&quot;Password change operation failed&quot;</span>);</div>
<div class="line"><span class="lineno">  540</span>            }</div>
<div class="line"><span class="lineno">  541</span>        }</div>
<div class="line"><span class="lineno">  542</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> runtime_error&amp; e) {</div>
<div class="line"><span class="lineno">  543</span>            <span class="comment">// Log the error details</span></div>
<div class="line"><span class="lineno">  544</span>            cout &lt;&lt; <span class="stringliteral">&quot;Authentication error: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  545</span>            cout &lt;&lt; <span class="stringliteral">&quot;User attempted: &quot;</span> &lt;&lt; activeUsrNumber &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  546</span>            </div>
<div class="line"><span class="lineno">  547</span>            <span class="comment">// Example of re-throwing the same exception</span></div>
<div class="line"><span class="lineno">  548</span>            <span class="comment">// This will be caught by the outer try-catch block</span></div>
<div class="line"><span class="lineno">  549</span>            cout &lt;&lt; <span class="stringliteral">&quot;Re-throwing exception...&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  550</span>            <span class="keywordflow">throw</span>;  <span class="comment">// Re-throw the current exception</span></div>
<div class="line"><span class="lineno">  551</span>        }</div>
<div class="line"><span class="lineno">  552</span>    }</div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> exception&amp; e) {</div>
<div class="line"><span class="lineno">  554</span>        <span class="comment">// Handle the re-thrown exception</span></div>
<div class="line"><span class="lineno">  555</span>        cout &lt;&lt; <span class="stringliteral">&quot;Operation aborted: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  556</span>        cout &lt;&lt; <span class="stringliteral">&quot;Please try again with valid credentials.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  557</span>    }</div>
<div class="line"><span class="lineno">  558</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_ae24319bcaa52e6ba00cf94082acc13fc_icgraph.png" border="0" usemap="#amain_8cpp_ae24319bcaa52e6ba00cf94082acc13fc_icgraph" alt=""/></div>
<map name="amain_8cpp_ae24319bcaa52e6ba00cf94082acc13fc_icgraph" id="amain_8cpp_ae24319bcaa52e6ba00cf94082acc13fc_icgraph">
<area shape="rect" title="Tests the password change functionality with exception re&#45;throwing." alt="" coords="108,5,265,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="aae3cc853b752a40d286780d2063f051e" name="aae3cc853b752a40d286780d2063f051e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae3cc853b752a40d286780d2063f051e">&#9670;&#160;</a></span>testRandomAccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testRandomAccess </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test function for random access to user records in binary file. </p>
<p>Opens the database file in binary mode and allows direct access to user records by index. Shows file statistics including the number of records stored. Demonstrates low-level binary file operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The name of the database file to access </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00602">602</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  602</span>                                              {</div>
<div class="line"><span class="lineno">  603</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== Testing Random Binary Access ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  604</span>    </div>
<div class="line"><span class="lineno">  605</span>    <span class="comment">// Open the binary file for reading</span></div>
<div class="line"><span class="lineno">  606</span>    ifstream file(filename, ios::in | ios::binary);</div>
<div class="line"><span class="lineno">  607</span>    <span class="keywordflow">if</span> (!file.is_open()) {</div>
<div class="line"><span class="lineno">  608</span>        cout &lt;&lt; <span class="stringliteral">&quot;Could not open file &quot;</span> &lt;&lt; filename </div>
<div class="line"><span class="lineno">  609</span>             &lt;&lt; <span class="stringliteral">&quot; for random access test.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  610</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  611</span>    }</div>
<div class="line"><span class="lineno">  612</span>    </div>
<div class="line"><span class="lineno">  613</span>    <span class="comment">// Calculate file size</span></div>
<div class="line"><span class="lineno">  614</span>    file.seekg(0, ios::end);</div>
<div class="line"><span class="lineno">  615</span>    streampos fileSize = file.tellg();</div>
<div class="line"><span class="lineno">  616</span>    <span class="keywordtype">int</span> numRecords = fileSize / <span class="keyword">sizeof</span>(UserRecord);</div>
<div class="line"><span class="lineno">  617</span>    </div>
<div class="line"><span class="lineno">  618</span>    cout &lt;&lt; <span class="stringliteral">&quot;File contains &quot;</span> &lt;&lt; numRecords &lt;&lt; <span class="stringliteral">&quot; user records&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  619</span>    </div>
<div class="line"><span class="lineno">  620</span>    <span class="comment">// Check if there are any records</span></div>
<div class="line"><span class="lineno">  621</span>    <span class="keywordflow">if</span> (numRecords &lt;= 0) {</div>
<div class="line"><span class="lineno">  622</span>        cout &lt;&lt; <span class="stringliteral">&quot;No records available for random access.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  623</span>        file.close();</div>
<div class="line"><span class="lineno">  624</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  625</span>    }</div>
<div class="line"><span class="lineno">  626</span>    </div>
<div class="line"><span class="lineno">  627</span>    <span class="comment">// Display the first record (Admin user)</span></div>
<div class="line"><span class="lineno">  628</span>    file.seekg(0, ios::beg);</div>
<div class="line"><span class="lineno">  629</span>    User* firstUser = UserFactory::readUserFromFile(file);</div>
<div class="line"><span class="lineno">  630</span>    </div>
<div class="line"><span class="lineno">  631</span>    <span class="keywordflow">if</span> (firstUser) {</div>
<div class="line"><span class="lineno">  632</span>        cout &lt;&lt; <span class="stringliteral">&quot;First record (default admin):&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  633</span>        cout &lt;&lt; *firstUser &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  634</span>        <span class="keyword">delete</span> firstUser;</div>
<div class="line"><span class="lineno">  635</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  636</span>        cout &lt;&lt; <span class="stringliteral">&quot;Failed to read first record.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  637</span>    }</div>
<div class="line"><span class="lineno">  638</span>    </div>
<div class="line"><span class="lineno">  639</span>    <span class="comment">// If more records exist, access random records</span></div>
<div class="line"><span class="lineno">  640</span>    <span class="keywordflow">if</span> (numRecords &gt; 1) {</div>
<div class="line"><span class="lineno">  641</span>        <span class="comment">// Let the user choose a record to access</span></div>
<div class="line"><span class="lineno">  642</span>        <span class="keywordtype">int</span> recordIndex;</div>
<div class="line"><span class="lineno">  643</span>        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno">  644</span>            cout &lt;&lt; <span class="stringliteral">&quot;Enter a record index to access (0-&quot;</span> &lt;&lt; numRecords - 1 </div>
<div class="line"><span class="lineno">  645</span>                 &lt;&lt; <span class="stringliteral">&quot;, or -1 to exit): &quot;</span>;</div>
<div class="line"><span class="lineno">  646</span>            cin &gt;&gt; recordIndex;</div>
<div class="line"><span class="lineno">  647</span>            </div>
<div class="line"><span class="lineno">  648</span>            <span class="keywordflow">if</span> (recordIndex == -1) {</div>
<div class="line"><span class="lineno">  649</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  650</span>            }</div>
<div class="line"><span class="lineno">  651</span>            </div>
<div class="line"><span class="lineno">  652</span>            <span class="keywordflow">if</span> (recordIndex &lt; 0 || recordIndex &gt;= numRecords) {</div>
<div class="line"><span class="lineno">  653</span>                cout &lt;&lt; <span class="stringliteral">&quot;Invalid record index.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  654</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  655</span>            }</div>
<div class="line"><span class="lineno">  656</span>            </div>
<div class="line"><span class="lineno">  657</span>            <span class="comment">// Seek to the selected record</span></div>
<div class="line"><span class="lineno">  658</span>            file.seekg(recordIndex * <span class="keyword">sizeof</span>(UserRecord), ios::beg);</div>
<div class="line"><span class="lineno">  659</span>            </div>
<div class="line"><span class="lineno">  660</span>            <span class="comment">// Read the user from this position</span></div>
<div class="line"><span class="lineno">  661</span>            User* user = UserFactory::readUserFromFile(file);</div>
<div class="line"><span class="lineno">  662</span>            </div>
<div class="line"><span class="lineno">  663</span>            <span class="keywordflow">if</span> (user) {</div>
<div class="line"><span class="lineno">  664</span>                cout &lt;&lt; <span class="stringliteral">&quot;User at position &quot;</span> &lt;&lt; recordIndex &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  665</span>                cout &lt;&lt; *user &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  666</span>                <span class="keyword">delete</span> user;</div>
<div class="line"><span class="lineno">  667</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  668</span>                cout &lt;&lt; <span class="stringliteral">&quot;Failed to read user at position &quot;</span> </div>
<div class="line"><span class="lineno">  669</span>                     &lt;&lt; recordIndex &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  670</span>            }</div>
<div class="line"><span class="lineno">  671</span>        }</div>
<div class="line"><span class="lineno">  672</span>    }</div>
<div class="line"><span class="lineno">  673</span>    </div>
<div class="line"><span class="lineno">  674</span>    file.close();</div>
<div class="line"><span class="lineno">  675</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_aae3cc853b752a40d286780d2063f051e_icgraph.png" border="0" usemap="#amain_8cpp_aae3cc853b752a40d286780d2063f051e_icgraph" alt=""/></div>
<map name="amain_8cpp_aae3cc853b752a40d286780d2063f051e_icgraph" id="amain_8cpp_aae3cc853b752a40d286780d2063f051e_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,255,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="aa337dbbf3d35bee99a64dabe2bbf7010" name="aa337dbbf3d35bee99a64dabe2bbf7010"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa337dbbf3d35bee99a64dabe2bbf7010">&#9670;&#160;</a></span>testRemoveUser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testRemoveUser </td>
          <td>(</td>
          <td class="paramtype">UserDatabase &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test function for removing users from the database. </p>
<p>Demonstrates using and catching custom UserDatabaseException Uses confirmation prompt before removal</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Reference to the user database </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00395">395</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  395</span>                                      {</div>
<div class="line"><span class="lineno">  396</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== Remove User ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  397</span>    </div>
<div class="line"><span class="lineno">  398</span>    u_int32_t usrNumber;</div>
<div class="line"><span class="lineno">  399</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter user number to remove: &quot;</span>;</div>
<div class="line"><span class="lineno">  400</span>    cin &gt;&gt; usrNumber;</div>
<div class="line"><span class="lineno">  401</span>    </div>
<div class="line"><span class="lineno">  402</span>    <span class="comment">// Try to find user</span></div>
<div class="line"><span class="lineno">  403</span>    User* userToRemove = db.findUserByNumber(usrNumber);</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">if</span> (!userToRemove) {</div>
<div class="line"><span class="lineno">  405</span>        cout &lt;&lt; <span class="stringliteral">&quot;User with number &quot;</span> &lt;&lt; usrNumber &lt;&lt; <span class="stringliteral">&quot; not found.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  406</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  407</span>    }</div>
<div class="line"><span class="lineno">  408</span>    </div>
<div class="line"><span class="lineno">  409</span>    <span class="comment">// Display user info</span></div>
<div class="line"><span class="lineno">  410</span>    cout &lt;&lt; <span class="stringliteral">&quot;User to remove:&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  411</span>    <a class="code hl_function" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails</a>(userToRemove);</div>
<div class="line"><span class="lineno">  412</span>    </div>
<div class="line"><span class="lineno">  413</span>    <span class="comment">// Confirm removal</span></div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordtype">char</span> confirm;</div>
<div class="line"><span class="lineno">  415</span>    cout &lt;&lt; <span class="stringliteral">&quot;Are you sure you want to remove this user? (y/n): &quot;</span>;</div>
<div class="line"><span class="lineno">  416</span>    cin &gt;&gt; confirm;</div>
<div class="line"><span class="lineno">  417</span>    </div>
<div class="line"><span class="lineno">  418</span>    <span class="keywordflow">if</span> (tolower(confirm) == <span class="charliteral">&#39;y&#39;</span>) {</div>
<div class="line"><span class="lineno">  419</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  420</span>            <span class="keywordflow">if</span> (db.removeUser(userToRemove)) {</div>
<div class="line"><span class="lineno">  421</span>                cout &lt;&lt; <span class="stringliteral">&quot;User removed successfully!&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  422</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  423</span>                cout &lt;&lt; <span class="stringliteral">&quot;Failed to remove user.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  424</span>            }</div>
<div class="line"><span class="lineno">  425</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> UserDatabaseException&amp; e) {</div>
<div class="line"><span class="lineno">  426</span>            cout &lt;&lt; <span class="stringliteral">&quot;Database Exception: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  427</span>            cout &lt;&lt; <span class="stringliteral">&quot;Error type: &quot;</span> &lt;&lt; e.getErrorString() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  428</span>            cout &lt;&lt; <span class="stringliteral">&quot;Error code: &quot;</span> &lt;&lt; e.getErrorCode() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  429</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  430</span>            <span class="comment">// Fallback for other types of exceptions</span></div>
<div class="line"><span class="lineno">  431</span>            cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  432</span>        }</div>
<div class="line"><span class="lineno">  433</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  434</span>        cout &lt;&lt; <span class="stringliteral">&quot;User removal cancelled.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  435</span>    }</div>
<div class="line"><span class="lineno">  436</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails()</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_aa337dbbf3d35bee99a64dabe2bbf7010_cgraph.png" border="0" usemap="#amain_8cpp_aa337dbbf3d35bee99a64dabe2bbf7010_cgraph" alt=""/></div>
<map name="amain_8cpp_aa337dbbf3d35bee99a64dabe2bbf7010_cgraph" id="amain_8cpp_aa337dbbf3d35bee99a64dabe2bbf7010_cgraph">
<area shape="rect" title="Test function for removing users from the database." alt="" coords="5,5,136,31"/>
<area shape="rect" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02" title=" " alt="" coords="184,5,329,31"/>
<area shape="poly" title=" " alt="" coords="136,15,170,15,170,21,136,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_aa337dbbf3d35bee99a64dabe2bbf7010_icgraph.png" border="0" usemap="#amain_8cpp_aa337dbbf3d35bee99a64dabe2bbf7010_icgraph" alt=""/></div>
<map name="amain_8cpp_aa337dbbf3d35bee99a64dabe2bbf7010_icgraph" id="amain_8cpp_aa337dbbf3d35bee99a64dabe2bbf7010_icgraph">
<area shape="rect" title="Test function for removing users from the database." alt="" coords="108,5,239,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="ad8c2f8687c9ce381f10c5f0f1881331e" name="ad8c2f8687c9ce381f10c5f0f1881331e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8c2f8687c9ce381f10c5f0f1881331e">&#9670;&#160;</a></span>testUpdateUser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testUpdateUser </td>
          <td>(</td>
          <td class="paramtype">UserDatabase &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test function for updating existing users in the database. </p>
<p>Prompts for a user number, finds the user, and allows updating NIF, password, and/or role. Empty input keeps current values. Creates a new user object with updated information and replaces the existing user in the database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Reference to the user database </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00317">317</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>                                      {</div>
<div class="line"><span class="lineno">  318</span>    cout &lt;&lt; <span class="stringliteral">&quot;\n=== Update User ===&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  319</span>    </div>
<div class="line"><span class="lineno">  320</span>    u_int32_t usrNumber;</div>
<div class="line"><span class="lineno">  321</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter user number to update: &quot;</span>;</div>
<div class="line"><span class="lineno">  322</span>    cin &gt;&gt; usrNumber;</div>
<div class="line"><span class="lineno">  323</span>    </div>
<div class="line"><span class="lineno">  324</span>    <span class="comment">// Try to find user</span></div>
<div class="line"><span class="lineno">  325</span>    User* existingUser = db.findUserByNumber(usrNumber);</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">if</span> (!existingUser) {</div>
<div class="line"><span class="lineno">  327</span>        cout &lt;&lt; <span class="stringliteral">&quot;User with number &quot;</span> &lt;&lt; usrNumber &lt;&lt; <span class="stringliteral">&quot; not found.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  329</span>    }</div>
<div class="line"><span class="lineno">  330</span>    </div>
<div class="line"><span class="lineno">  331</span>    <span class="comment">// Display current user info</span></div>
<div class="line"><span class="lineno">  332</span>    cout &lt;&lt; <span class="stringliteral">&quot;Current user information:&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  333</span>    <a class="code hl_function" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails</a>(existingUser);</div>
<div class="line"><span class="lineno">  334</span>    </div>
<div class="line"><span class="lineno">  335</span>    <span class="comment">// Get updated info</span></div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordtype">char</span> NIF[User::MAX_NIF];</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordtype">char</span> pwd[User::MAX_STR];</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordtype">int</span> roleChoice;</div>
<div class="line"><span class="lineno">  339</span>    </div>
<div class="line"><span class="lineno">  340</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter new NIF (or leave blank to keep current): &quot;</span>;</div>
<div class="line"><span class="lineno">  341</span>    cin.ignore(); <span class="comment">// Clear input buffer</span></div>
<div class="line"><span class="lineno">  342</span>    cin.getline(NIF, User::MAX_NIF);</div>
<div class="line"><span class="lineno">  343</span>    </div>
<div class="line"><span class="lineno">  344</span>    cout &lt;&lt; <span class="stringliteral">&quot;Enter new password (or leave blank to keep current): &quot;</span>;</div>
<div class="line"><span class="lineno">  345</span>    cin.getline(pwd, User::MAX_STR);</div>
<div class="line"><span class="lineno">  346</span>    </div>
<div class="line"><span class="lineno">  347</span>    cout &lt;&lt; <span class="stringliteral">&quot;Select new role (0 for ADMIN, 1 for EMPLOYEE, &quot;</span></div>
<div class="line"><span class="lineno">  348</span>         &lt;&lt; <span class="stringliteral">&quot;or any other number to keep current): &quot;</span>;</div>
<div class="line"><span class="lineno">  349</span>    cin &gt;&gt; roleChoice;</div>
<div class="line"><span class="lineno">  350</span>    </div>
<div class="line"><span class="lineno">  351</span>    <span class="comment">// Create updated user object</span></div>
<div class="line"><span class="lineno">  352</span>    User* updatedUser = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  354</span>        <span class="comment">// Use existing values if fields were left blank</span></div>
<div class="line"><span class="lineno">  355</span>        <span class="keyword">const</span> <span class="keywordtype">char</span>* newNIF = (NIF[0] == <span class="charliteral">&#39;\0&#39;</span>) ? </div>
<div class="line"><span class="lineno">  356</span>             existingUser-&gt;getNIF() : NIF;</div>
<div class="line"><span class="lineno">  357</span>        <span class="keyword">const</span> <span class="keywordtype">char</span>* newPwd = (pwd[0] == <span class="charliteral">&#39;\0&#39;</span>) ?</div>
<div class="line"><span class="lineno">  358</span>             existingUser-&gt;getPwd().c_str() : pwd;</div>
<div class="line"><span class="lineno">  359</span>        User::Role newRole = (roleChoice == 0) ? User::ADMIN :</div>
<div class="line"><span class="lineno">  360</span>                             (roleChoice == 1) ? User::EMPLOYEE :</div>
<div class="line"><span class="lineno">  361</span>                             existingUser-&gt;getRole();</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>        <span class="comment">// Create appropriate user type</span></div>
<div class="line"><span class="lineno">  364</span>        <span class="keywordflow">if</span> (newRole == User::ADMIN) {</div>
<div class="line"><span class="lineno">  365</span>            updatedUser = <span class="keyword">new</span> Admin(usrNumber, newNIF, newPwd, User::ADMIN);</div>
<div class="line"><span class="lineno">  366</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  367</span>            updatedUser = <span class="keyword">new</span> Employee(usrNumber, </div>
<div class="line"><span class="lineno">  368</span>                                       newNIF, </div>
<div class="line"><span class="lineno">  369</span>                                       newPwd, </div>
<div class="line"><span class="lineno">  370</span>                                       User::EMPLOYEE);</div>
<div class="line"><span class="lineno">  371</span>        }</div>
<div class="line"><span class="lineno">  372</span>        </div>
<div class="line"><span class="lineno">  373</span>        <span class="comment">// Update the user in the database</span></div>
<div class="line"><span class="lineno">  374</span>        <span class="keywordflow">if</span> (db.updateUser(updatedUser)) {</div>
<div class="line"><span class="lineno">  375</span>            cout &lt;&lt; <span class="stringliteral">&quot;User updated successfully!&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  376</span>            <a class="code hl_function" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails</a>(updatedUser);</div>
<div class="line"><span class="lineno">  377</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  378</span>            cout &lt;&lt; <span class="stringliteral">&quot;Failed to update user.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  379</span>            <span class="keyword">delete</span> updatedUser;</div>
<div class="line"><span class="lineno">  380</span>        }</div>
<div class="line"><span class="lineno">  381</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> exception&amp; e) {</div>
<div class="line"><span class="lineno">  382</span>        cout &lt;&lt; <span class="stringliteral">&quot;Error updating user: &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line"><span class="lineno">  383</span>        <span class="keywordflow">if</span> (updatedUser) <span class="keyword">delete</span> updatedUser;</div>
<div class="line"><span class="lineno">  384</span>    }</div>
<div class="line"><span class="lineno">  385</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02">displayUserDetails()</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_ad8c2f8687c9ce381f10c5f0f1881331e_cgraph.png" border="0" usemap="#amain_8cpp_ad8c2f8687c9ce381f10c5f0f1881331e_cgraph" alt=""/></div>
<map name="amain_8cpp_ad8c2f8687c9ce381f10c5f0f1881331e_cgraph" id="amain_8cpp_ad8c2f8687c9ce381f10c5f0f1881331e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,129,31"/>
<area shape="rect" href="main_8cpp.html#a8b549f355b604af82d673afb448d0d02" title=" " alt="" coords="177,5,323,31"/>
<area shape="poly" title=" " alt="" coords="130,15,164,15,164,21,130,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_ad8c2f8687c9ce381f10c5f0f1881331e_icgraph.png" border="0" usemap="#amain_8cpp_ad8c2f8687c9ce381f10c5f0f1881331e_icgraph" alt=""/></div>
<map name="amain_8cpp_ad8c2f8687c9ce381f10c5f0f1881331e_icgraph" id="amain_8cpp_ad8c2f8687c9ce381f10c5f0f1881331e_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,232,31"/>
<area shape="rect" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
